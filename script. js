document.addEventListener("DOMContentLoaded", () => {
  const navLinks = document.querySelectorAll(".navbar a");
  const pages = document.querySelectorAll(".page");
  const actionBtns = document.querySelectorAll(".action-btn");

  // Bottom Nav
  navLinks.forEach(link => {
    link.addEventListener("click", (e) => {
      e.preventDefault();
      showPage(link.getAttribute("data-page"));
      setActiveNav(link);
    });
  });

  // Action buttons (Withdraw/Deposit from Home)
  actionBtns.forEach(btn => {
    btn.addEventListener("click", () => {
      const target = btn.getAttribute("data-page");
      if (target) {
        showPage(target);
      }
    });
  });

  // Withdraw
  const withdrawBtn = document.getElementById("withdrawBtn");
  if (withdrawBtn) {
    withdrawBtn.addEventListener("click", () => {
      const amount = document.getElementById("withdrawAmount").value;
      const number = document.getElementById("userBkash").innerText;
      if (amount) {
        alert(`৳${amount} টাকা ${number} নাম্বারে পাঠানো হলো ✅`);
      } else {
        alert("দয়া করে টাকার পরিমাণ লিখুন!");
      }
    });
  }

  // Copy referral link
  const copyBtn = document.getElementById("copyLink");
  if (copyBtn) {
    copyBtn.addEventListener("click", () => {
      const refInput = document.getElementById("refLink");
      refInput.select();
      document.execCommand("copy");
      alert("Referral link copied!");
    });
  }

  // Share referral link
  const shareBtn = document.getElementById("shareLink");
  if (shareBtn) {
    shareBtn.addEventListener("click", () => {
      const link = document.getElementById("refLink").value;
      if (navigator.share) {
        navigator.share({
          title: "Join Bullpen App",
          text: "Check this app and earn money!",
          url: link
        });
      } else {
        alert("শেয়ার করার সুবিধা এই ব্রাউজারে নেই।");
      }
    });
  }

  function showPage(id) {
    pages.forEach(p => p.classList.remove("active"));
    document.getElementById(id).classList.add("active");
  }
  function setActiveNav(activeLink) {
    navLinks.forEach(l => l.classList.remove("active"));
    activeLink.classList.add("active");
  }
});
